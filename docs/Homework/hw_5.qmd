---
title: "HW 5"
author: "Ella Addink"
format: html
embed-resources: true
code-tools: true 
---

## Exercise 1

![[Graphic found here](https://r-graph-gallery.com/web-ridgeline-plot-with-inside-plot-and-annotations.html)](san_fran_rent_graphic.png){width="70%"}

1.  What marks are being used? What variables are mapped to which properties?

    -   A "point" mark is used to show the median rent for houses within each adjective group. For the points, rent is mapped to the x position and the adjective is mapped to the y position.

    -   A "line" mark is used to show the median rent of all houses and apartments. For the line, median rent is again mapped to the x position.

    -   A "bar" mark is used to show the distribution of rent prices corresponding to each adjective. Again, rent is mapped to the x position and adjective is mapped to the y. The percentile category that a rent price is in is mapped to color.

    -   An "area" mark is used to also show the distribution of rent prices corresponding to each adjective. Rent is again mapped to the x axis. Count of houses is mapped to another smaller y axis for each adjective.

    -   A "text" mark is used to show the median or average number of bedrooms for each adjective. Adjective is again mapped to the (larger) y position.

2.  What is the main story of this graphic?

    The main story of this graphic is that there may be a relationship between the rent of houses for sale in this area and the adjectives used to describe these houses on Craigslist. It appears that certain descriptors are tied to a relatively lower rent than other descriptors.

3.  What makes it a good graphic?

    This graphic utilizes many different kinds of marks and I think it does a good job at layering and combining these to highlight the differences in rent between the different adjectives used. It is, for the most part, clear and easy to understand. The title, caption, labels, and legend are concise yet informative and helpful.

4.  What features do you think you would know how to implement in Vega-Lite?

    I think I would be able to create the x and y axis and points, line, and text marks. The bars are just horizontal bars layered on top of each other which I think I could figure out but I'm not exactly sure how to make the length of the bar correspond to the percent of the data it captures. I could make a density/area plot for the rents and could probably facet by adjective to have a separate plot for each one.

5.  Are there any features of the graphic that you would not know how to do in Vega-Lite? If so, list them.

    In addition to the things I mentioned in the question above that have parts to them I am not sure about, I am also not sure how to make the legend. The legend is itself almost a whole new layer and graphic and I am not sure how it would be added to the main graphic.

## Exercise 2

```{r warning = FALSE, include = FALSE}
library(vegawidget)
```

#### Exercise 1 from the slides

1.  Create a graphic that shows the high temperature in Seattle each day.

2.  Now modify this so that the temperatures for the same day of the year are overlaid on top of each other for the several years in the data set.

```{r echo = FALSE}
'
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://calvin-data304.netlify.app/data/weather-with-dates.csv"},
  "width": 500,
  "height": 300,
  "title": "Daily High Temperature in Seattle (2012-2015)",
  "mark": "area",
  "transform": [
    {"calculate": "datetime(datum.year, datum.month, datum.day)", "as": "converted_date"}, 
    {"calculate": "datum.temp_max*(1.8) + 32", "as": "temp_max_f"}
  ],
  "encoding": {
    "x": {"field": "converted_date", "timeUnit": "monthdate", "type": "temporal", 
    "title": "Date"}, 
    "y": {"aggregate": "max", "field": "temp_max_f", "type": "quantitative", 
    "title": "High Temperature in Fahrenheit"},
    "y2": {"aggregate": "min", "field": "temp_max_f", "type": "quantitative"},
    "color": {"value": "purple"}
}
}' |> as_vegaspec()
```

#### Exercise 3 from the slides

Create a graphic that shows how the different types of weather (rain, fog, etc.) are distributedÂ *by month*Â in Seattle. When is it rainiest in Seattle? Sunniest?

```{r echo = FALSE}
'
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {"url": "https://calvin-data304.netlify.app/data/weather-with-dates.csv"},
  "width": 500,
  "height": 300,
  "title": "Monthly Weather in Seattle (2012-2015)",
  "params": [
    {
      "name": "weather",
      "value": "sun",
      "bind": {"input": "select", "options": ["sun", "fog", "drizzle", "rain", "snow"], 
      "labels": ["Sun", "Fog", "Drizzle", "Rain", "Snow"]}
    }
  ],
  "transform": [
    {"filter": {"field": "location", "equal": "Seattle"}},
    {"filter": "datum.weather == weather"},
    {"aggregate": [{"op": "count", "as": "days"}], "groupby": ["year", "month"]}
  ],
  "encoding": {
    "x": {"field": "month", "type": "ordinal", "timeUnit": "month", "title": "Month", 
    "scale": {"domain": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", 
    "Sep", "Oct", "Nov", "Dec"]}}
  },

  "layer": [
  {"mark": "rule",
  "encoding": {
    "y": {"field": "days", "aggregate": "max"},
    "y2": {"field": "days", "aggregate": "min"}}
  },

  {"mark": "point",
  "encoding": {
    "y": {"field": "days", "type": "quantitative", "title": "Number of Days", 
    "scale": {"domain": [0, 30]}},
    "color": {"field": "year", "title": "Year", "scale": {"domain": ["2012", 
    "2013", "2014", "2015"]}},
    "fill": {"value": "white"}, 
    "fillOpacity": {"value": 1}}
  }
  ]
}' |> as_vegaspec()
```
